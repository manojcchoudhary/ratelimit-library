# Performance Benchmarks

This document contains the latest benchmark results for the Rate Limiting Library.

> **Note**: This file is automatically generated by running the benchmarks.
> Run `java -jar rl-benchmarks/target/benchmarks.jar` to update.

## Quick Summary

| Storage Type | Algorithm | Target Latency | Target Throughput |
|--------------|-----------|----------------|-------------------|
| Local (Caffeine) | Token Bucket | < 100μs | > 8M ops/sec |
| Local (Caffeine) | Sliding Window | < 100μs | > 6M ops/sec |
| Local (InMemory) | Token Bucket | < 50μs | > 20M ops/sec |
| Tiered (Caf+Caf) | Token Bucket | < 100μs | > 5M ops/sec |
| Distributed (Redis) | Token Bucket | < 2ms | ~45K ops/sec |
| Tiered (Redis+Caf) | Token Bucket | < 2ms | ~40K ops/sec |

## Running Benchmarks

To run benchmarks yourself:

```bash
# Build the benchmark jar
mvn clean package -pl rl-benchmarks -am -DskipTests

# Run all benchmarks (without Redis)
java -jar rl-benchmarks/target/benchmarks.jar

# Run with Redis
docker run -d -p 6379:6379 redis:7-alpine
java -Dredis.host=localhost -Dredis.port=6379 \
     -jar rl-benchmarks/target/benchmarks.jar

# Run specific benchmark
java -jar rl-benchmarks/target/benchmarks.jar StorageBenchmark
java -jar rl-benchmarks/target/benchmarks.jar TieredStorageBenchmark
java -jar rl-benchmarks/target/benchmarks.jar RedisBenchmark
java -jar rl-benchmarks/target/benchmarks.jar SpELBenchmark
java -jar rl-benchmarks/target/benchmarks.jar TokenBucketBenchmark
```

## Benchmark Suites

### StorageBenchmark
Tests storage provider implementations (Caffeine, InMemory) with various access patterns.

### TieredStorageBenchmark
Tests tiered storage configurations (L1/L2) with failover scenarios.

### RedisBenchmark
Tests Redis storage provider and tiered Redis+Caffeine configurations.

### SpELBenchmark
Tests SpEL expression evaluation performance (compiled vs interpreted).

### TokenBucketBenchmark
Tests pure Token Bucket algorithm performance.

## Notes

- **Throughput** is measured in operations per time unit (higher is better)
- **Latency** is measured in time per operation (lower is better)
- Results may vary based on hardware, JVM version, and system load
- Redis benchmarks require a running Redis instance
- Tiered storage uses Redis as L1 (distributed) and Caffeine as L2 (local fallback)
